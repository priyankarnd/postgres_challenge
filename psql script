CREATE DATABASE challenge;

\c challenge

CREATE EXTENSION "uuid-ossp";

DROP TABLE IF EXISTS employees;

DROP TABLE IF EXISTS department;

CREATE TABLE department(
	department_id uuid DEFAULT uuid_generate_v4 (), 
	department_name VARCHAR(30),
	salary_increment NUMERIC(2,2),
	PRIMARY KEY(department_id)
);

SELECT *
	FROM department;

CREATE TABLE employees(
	employee_id uuid DEFAULT uuid_generate_v4 () ,
	department_id uuid,
	first_name VARCHAR(30),
	last_name VARCHAR(30),
	salary NUMERIC(5,2),
	PRIMARY KEY(employee_id),
	CONSTRAINT fk_department
	FOREIGN KEY(department_id)
	REFERENCES department(department_id)
);

SELECT *
	FROM employees;
	
\dt+

DROP TABLE IF EXISTS temp_table;
	
CREATE TABLE IF NOT EXISTS temp_table (
				first_name VARCHAR(30),
				last_name VARCHAR(30),
				salary NUMERIC(5),
				dept_name VARCHAR(20),
				salary_increment NUMERIC(2)
);
	
COPY temp_table FROM '/Users/bappamac/flat_data.csv' DELIMITER ',' CSV HEADER;
